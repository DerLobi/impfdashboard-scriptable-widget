var vega=function(t){"use strict";const e="[",r="]",n=/[[\]{}]/,i={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let s,c;function o(t,e,r,n,i){const s=t.length;let c,o=0;for(;e<s;++e){if(c=t[e],!o&&c===r)return e;i&&i.indexOf(c)>=0?--o:n&&n.indexOf(c)>=0&&++o}return e}function l(t){const e=[],r=t.length;let n=0,i=0;for(;i<r;)i=o(t,i,",","[{","]}"),e.push(t.substring(n,i).trim()),n=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function u(t){return"["===t[0]?function(t){const n=t.length;let i,s=1;if(s=o(t,s,r,e,r),s===n)throw"Empty between selector: "+t;if(i=l(t.substring(1,s)),2!==i.length)throw"Between selector must have two elements: "+t;if(">"!==(t=t.slice(s+1).trim())[0])throw"Expected '>' after between selector: "+t;i=i.map(u);const c=u(t.slice(1).trim());if(c.between)return{between:i,stream:c};c.between=i;return c}(t):function(t){const i={source:s},l=[];let u,h,f=[0,0],a=0,m=0,p=t.length,g=0;if("}"===t[p-1]){if(g=t.lastIndexOf("{"),!(g>=0))throw"Unmatched right brace: "+t;try{f=function(t){const e=t.split(",");if(!t.length||e.length>2)throw t;return e.map(e=>{const r=+e;if(r!=r)throw t;return r})}(t.substring(g+1,p-1))}catch(e){throw"Invalid throttle specification: "+t}p=(t=t.slice(0,g).trim()).length,g=0}if(!p)throw t;"@"===t[0]&&(a=++g);u=o(t,g,":"),u<p&&(l.push(t.substring(m,u).trim()),m=g=++u);if(g=o(t,g,e),g===p)l.push(t.substring(m,p).trim());else if(l.push(t.substring(m,g).trim()),h=[],m=++g,m===p)throw"Unmatched left bracket: "+t;for(;g<p;){if(g=o(t,g,r),g===p)throw"Unmatched left bracket: "+t;if(h.push(t.substring(m,g).trim()),g<p-1&&t[++g]!==e)throw"Expected left bracket: "+t;m=++g}if(!(p=l.length)||n.test(l[p-1]))throw"Invalid event selector: "+t;p>1?(i.type=l[1],a?i.markname=l[0].slice(1):(w=l[0],c[w]?i.marktype=l[0]:i.source=l[0])):i.type=l[0];var w;"!"===i.type.slice(-1)&&(i.consume=!0,i.type=i.type.slice(0,-1));null!=h&&(i.filter=h);f[0]&&(i.throttle=f[0]);f[1]&&(i.debounce=f[1]);return i}(t)}return t.selector=function(t,e,r){return s=e||"view",c=r||i,l(t.trim()).map(u)},t}({});
//# sourceMappingURL=vega-event-selector.min.js.map
