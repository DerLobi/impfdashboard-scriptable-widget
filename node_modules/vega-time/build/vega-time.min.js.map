{"version":3,"file":"vega-time.min.js","sources":["../src/units.js","../../../node_modules/d3-time/src/interval.js","../../../node_modules/d3-time/src/millisecond.js","../../../node_modules/d3-time/src/duration.js","../../../node_modules/d3-time/src/second.js","../../../node_modules/d3-time/src/minute.js","../../../node_modules/d3-time/src/hour.js","../../../node_modules/d3-time/src/day.js","../../../node_modules/d3-time/src/week.js","../../../node_modules/d3-time/src/month.js","../../../node_modules/d3-time/src/year.js","../../../node_modules/d3-time/src/utcMinute.js","../../../node_modules/d3-time/src/utcHour.js","../../../node_modules/d3-time/src/utcDay.js","../../../node_modules/d3-time/src/utcWeek.js","../../../node_modules/d3-time/src/utcMonth.js","../../../node_modules/d3-time/src/utcYear.js","../src/util.js","../src/floor.js","../src/interval.js","../../../node_modules/d3-array/src/bisector.js","../../../node_modules/d3-array/src/ascending.js","../../../node_modules/d3-array/src/ticks.js","../src/bin.js"],"sourcesContent":["import {array, error, extend, hasOwnProperty} from 'vega-util';\n\nexport const YEAR = 'year';\nexport const QUARTER = 'quarter';\nexport const MONTH = 'month';\nexport const WEEK = 'week';\nexport const DATE = 'date';\nexport const DAY = 'day';\nexport const DAYOFYEAR = 'dayofyear';\nexport const HOURS = 'hours';\nexport const MINUTES = 'minutes';\nexport const SECONDS = 'seconds';\nexport const MILLISECONDS = 'milliseconds';\n\nexport const TIME_UNITS = [\n  YEAR,\n  QUARTER,\n  MONTH,\n  WEEK,\n  DATE,\n  DAY,\n  DAYOFYEAR,\n  HOURS,\n  MINUTES,\n  SECONDS,\n  MILLISECONDS\n];\n\nconst UNITS = TIME_UNITS.reduce((o, u, i) => (o[u] = 1 + i, o), {});\n\nexport function timeUnits(units) {\n  const u = array(units).slice(),\n        m = {};\n\n  // check validity\n  if (!u.length) error('Missing time unit.');\n\n  u.forEach(unit => {\n    if (hasOwnProperty(UNITS, unit)) {\n      m[unit] = 1;\n    } else {\n      error(`Invalid time unit: ${unit}.`);\n    }\n  });\n\n  const numTypes = (\n    (m[WEEK] || m[DAY] ? 1 : 0) +\n    (m[QUARTER] || m[MONTH] || m[DATE] ? 1 : 0) +\n    (m[DAYOFYEAR] ? 1 : 0)\n  );\n\n  if (numTypes > 1) {\n    error(`Incompatible time units: ${units}`);\n  }\n\n  // ensure proper sort order\n  u.sort((a, b) => UNITS[a] - UNITS[b]);\n\n  return u;\n}\n\nconst defaultSpecifiers = {\n  [YEAR]: '%Y ',\n  [QUARTER]: 'Q%q ',\n  [MONTH]: '%b ',\n  [DATE]: '%d ',\n  [WEEK]: 'W%U ',\n  [DAY]: '%a ',\n  [DAYOFYEAR]: '%j ',\n  [HOURS]: '%H:00',\n  [MINUTES]: '00:%M',\n  [SECONDS]: ':%S',\n  [MILLISECONDS]: '.%L',\n  [`${YEAR}-${MONTH}`]: '%Y-%m ',\n  [`${YEAR}-${MONTH}-${DATE}`]: '%Y-%m-%d ',\n  [`${HOURS}-${MINUTES}`]: '%H:%M'\n};\n\nexport function timeUnitSpecifier(units, specifiers) {\n  const s = extend({}, defaultSpecifiers, specifiers),\n        u = timeUnits(units),\n        n = u.length;\n\n  let fmt = '', start = 0, end, key;\n\n  for (start=0; start<n; ) {\n    for (end=u.length; end > start; --end) {\n      key = u.slice(start, end).join('-');\n      if (s[key] != null) {\n        fmt += s[key];\n        start = end;\n        break;\n      }\n    }\n  }\n\n  return fmt.trim();\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval.js\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\nimport {durationMinute} from \"./duration.js\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval.js\";\nimport {durationHour} from \"./duration.js\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {timeDay, timeWeek, utcDay, utcWeek} from 'd3-time';\n\nconst t0 = new Date;\n\nfunction localYear(y) {\n  t0.setFullYear(y);\n  t0.setMonth(0);\n  t0.setDate(1);\n  t0.setHours(0, 0, 0, 0);\n  return t0;\n}\n\nexport function dayofyear(d) {\n  return localDayOfYear(new Date(d));\n}\n\nexport function week(d) {\n  return localWeekNum(new Date(d));\n}\n\nexport function localDayOfYear(d) {\n  return timeDay.count(localYear(d.getFullYear()) - 1, d);\n}\n\nexport function localWeekNum(d) {\n  return timeWeek.count(localYear(d.getFullYear()) - 1, d);\n}\n\nexport function localFirst(y) {\n  return localYear(y).getDay();\n}\n\nexport function localDate(y, m, d, H, M, S, L) {\n  if (0 <= y && y < 100) {\n    const date = new Date(-1, m, d, H, M, S, L);\n    date.setFullYear(y);\n    return date;\n  }\n  return new Date(y, m, d, H, M, S, L);\n}\n\nexport function utcdayofyear(d) {\n  return utcDayOfYear(new Date(d));\n}\n\nexport function utcweek(d) {\n  return utcWeekNum(new Date(d));\n}\n\nexport function utcDayOfYear(d) {\n  const y = Date.UTC(d.getUTCFullYear(), 0, 1);\n  return utcDay.count(y - 1, d);\n}\n\nexport function utcWeekNum(d) {\n  const y = Date.UTC(d.getUTCFullYear(), 0, 1);\n  return utcWeek.count(y - 1, d);\n}\n\nexport function utcFirst(y) {\n  t0.setTime(Date.UTC(y, 0, 1));\n  return t0.getUTCDay();\n}\n\nexport function utcDate(y, m, d, H, M, S, L) {\n  if (0 <= y && y < 100) {\n    const date = new Date(Date.UTC(-1, m, d, H, M, S, L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(y, m, d, H, M, S, L));\n}\n","import {\n  DATE,\n  DAY,\n  DAYOFYEAR,\n  HOURS,\n  MILLISECONDS,\n  MINUTES,\n  MONTH,\n  QUARTER,\n  SECONDS,\n  WEEK,\n  YEAR\n} from './units';\nimport {\n  localDate, localDayOfYear, localFirst, localWeekNum,\n  utcDate, utcDayOfYear, utcFirst, utcWeekNum\n} from './util';\nimport {constant, one, peek, toSet, zero} from 'vega-util';\n\nfunction floor(units, step, get, inv, newDate) {\n  const s = step || 1,\n        b = peek(units),\n        _ = (unit, p, key) => {\n          key = key || unit;\n          return getUnit(get[key], inv[key], unit === b && s, p);\n        };\n\n  const t = new Date,\n        u = toSet(units),\n        y = u[YEAR] ? _(YEAR) : constant(2012),\n        m = u[MONTH] ? _(MONTH)\n          : u[QUARTER] ? _(QUARTER)\n          : zero,\n        d = u[WEEK] && u[DAY] ? _(DAY, 1, WEEK + DAY)\n          : u[WEEK] ? _(WEEK, 1)\n          : u[DAY] ? _(DAY, 1)\n          : u[DATE] ? _(DATE, 1)\n          : u[DAYOFYEAR] ? _(DAYOFYEAR, 1)\n          : one,\n        H = u[HOURS] ? _(HOURS) : zero,\n        M = u[MINUTES] ? _(MINUTES) : zero,\n        S = u[SECONDS] ? _(SECONDS) : zero,\n        L = u[MILLISECONDS] ? _(MILLISECONDS) : zero;\n\n  return function(v) {\n    t.setTime(+v);\n    const year = y(t);\n    return newDate(year, m(t), d(t, year), H(t), M(t), S(t), L(t));\n  };\n}\n\nfunction getUnit(f, inv, step, phase) {\n  const u = step <= 1 ? f\n    : phase ? (d, y) => phase + step * Math.floor((f(d, y) - phase) / step)\n    : (d, y) => step * Math.floor(f(d, y) / step);\n  return inv ? (d, y) => inv(u(d, y), y) : u;\n}\n\n// returns the day of the year based on week number, day of week,\n// and the day of the week for the first day of the year\nfunction weekday(week, day, firstDay) {\n  return day + week * 7 - (firstDay + 6) % 7;\n}\n\n// -- LOCAL TIME --\n\nconst localGet = {\n  [YEAR]:         d => d.getFullYear(),\n  [QUARTER]:      d => Math.floor(d.getMonth() / 3),\n  [MONTH]:        d => d.getMonth(),\n  [DATE]:         d => d.getDate(),\n  [HOURS]:        d => d.getHours(),\n  [MINUTES]:      d => d.getMinutes(),\n  [SECONDS]:      d => d.getSeconds(),\n  [MILLISECONDS]: d => d.getMilliseconds(),\n  [DAYOFYEAR]:    d => localDayOfYear(d),\n  [WEEK]:         d => localWeekNum(d),\n  [WEEK + DAY]:   (d, y) => weekday(localWeekNum(d), d.getDay(), localFirst(y)),\n  [DAY]:          (d, y) => weekday(1, d.getDay(), localFirst(y))\n};\n\nconst localInv = {\n  [QUARTER]: q => 3 * q,\n  [WEEK]:    (w, y) => weekday(w, 0, localFirst(y))\n};\n\nexport function timeFloor(units, step) {\n  return floor(units, step || 1, localGet, localInv, localDate);\n}\n\n// -- UTC TIME --\n\nconst utcGet = {\n  [YEAR]:         d => d.getUTCFullYear(),\n  [QUARTER]:      d => Math.floor(d.getUTCMonth() / 3),\n  [MONTH]:        d => d.getUTCMonth(),\n  [DATE]:         d => d.getUTCDate(),\n  [HOURS]:        d => d.getUTCHours(),\n  [MINUTES]:      d => d.getUTCMinutes(),\n  [SECONDS]:      d => d.getUTCSeconds(),\n  [MILLISECONDS]: d => d.getUTCMilliseconds(),\n  [DAYOFYEAR]:    d => utcDayOfYear(d),\n  [WEEK]:         d => utcWeekNum(d),\n  [DAY]:          (d, y) => weekday(1, d.getUTCDay(), utcFirst(y)),\n  [WEEK + DAY]:   (d, y) => weekday(utcWeekNum(d), d.getUTCDay(), utcFirst(y))\n};\n\nconst utcInv = {\n  [QUARTER]: q => 3 * q,\n  [WEEK]:    (w, y) => weekday(w, 0, utcFirst(y))\n};\n\nexport function utcFloor(units, step) {\n  return floor(units, step || 1, utcGet, utcInv, utcDate);\n}\n","import {\n  DATE,\n  DAY,\n  DAYOFYEAR,\n  HOURS,\n  MILLISECONDS,\n  MINUTES,\n  MONTH,\n  QUARTER,\n  SECONDS,\n  WEEK,\n  YEAR\n} from './units';\n\nimport {\n  timeDay,\n  timeHour,\n  timeMillisecond,\n  timeMinute,\n  timeMonth,\n  timeSecond,\n  timeWeek,\n  timeYear,\n  utcDay,\n  utcHour,\n  utcMillisecond,\n  utcMinute,\n  utcMonth,\n  utcSecond,\n  utcWeek,\n  utcYear\n} from 'd3-time';\n\nconst timeIntervals = {\n  [YEAR]:         timeYear,\n  [QUARTER]:      timeMonth.every(3),\n  [MONTH]:        timeMonth,\n  [WEEK]:         timeWeek,\n  [DATE]:         timeDay,\n  [DAY]:          timeDay,\n  [DAYOFYEAR]:    timeDay,\n  [HOURS]:        timeHour,\n  [MINUTES]:      timeMinute,\n  [SECONDS]:      timeSecond,\n  [MILLISECONDS]: timeMillisecond\n};\n\nconst utcIntervals = {\n  [YEAR]:         utcYear,\n  [QUARTER]:      utcMonth.every(3),\n  [MONTH]:        utcMonth,\n  [WEEK]:         utcWeek,\n  [DATE]:         utcDay,\n  [DAY]:          utcDay,\n  [DAYOFYEAR]:    utcDay,\n  [HOURS]:        utcHour,\n  [MINUTES]:      utcMinute,\n  [SECONDS]:      utcSecond,\n  [MILLISECONDS]: utcMillisecond\n};\n\nexport function timeInterval(unit) {\n  return timeIntervals[unit];\n}\n\nexport function utcInterval(unit) {\n  return utcIntervals[unit];\n}\n\nfunction offset(ival, date, step) {\n  return ival ? ival.offset(date, step) : undefined;\n}\n\nexport function timeOffset(unit, date, step) {\n  return offset(timeInterval(unit), date, step);\n}\n\nexport function utcOffset(unit, date, step) {\n  return offset(utcInterval(unit), date, step);\n}\n\nfunction sequence(ival, start, stop, step) {\n  return ival ? ival.range(start, stop, step) : undefined;\n}\n\nexport function timeSequence(unit, start, stop, step) {\n  return sequence(timeInterval(unit), start, stop, step);\n}\n\nexport function utcSequence(unit, start, stop, step) {\n  return sequence(utcInterval(unit), start, stop, step);\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    step = -step;\n    start = Math.ceil(start * step);\n    stop = Math.floor(stop * step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","import {DATE, HOURS, MILLISECONDS, MINUTES, MONTH, SECONDS, WEEK, YEAR} from './units';\nimport {span} from 'vega-util';\nimport {bisector, tickStep} from 'd3-array';\n\nconst durationSecond = 1000,\n      durationMinute = durationSecond * 60,\n      durationHour = durationMinute * 60,\n      durationDay = durationHour * 24,\n      durationWeek = durationDay * 7,\n      durationMonth = durationDay * 30,\n      durationYear = durationDay * 365;\n\nconst Milli   = [YEAR, MONTH, DATE, HOURS, MINUTES, SECONDS, MILLISECONDS],\n      Seconds = Milli.slice(0, -1),\n      Minutes = Seconds.slice(0, -1),\n      Hours   = Minutes.slice(0, -1),\n      Day     = Hours.slice(0, -1),\n      Week    = [YEAR, WEEK],\n      Month   = [YEAR, MONTH],\n      Year    = [YEAR];\n\nconst intervals = [\n  [Seconds,  1,      durationSecond],\n  [Seconds,  5,  5 * durationSecond],\n  [Seconds, 15, 15 * durationSecond],\n  [Seconds, 30, 30 * durationSecond],\n  [Minutes,  1,      durationMinute],\n  [Minutes,  5,  5 * durationMinute],\n  [Minutes, 15, 15 * durationMinute],\n  [Minutes, 30, 30 * durationMinute],\n  [  Hours,  1,      durationHour  ],\n  [  Hours,  3,  3 * durationHour  ],\n  [  Hours,  6,  6 * durationHour  ],\n  [  Hours, 12, 12 * durationHour  ],\n  [    Day,  1,      durationDay   ],\n  [   Week,  1,      durationWeek  ],\n  [  Month,  1,      durationMonth ],\n  [  Month,  3,  3 * durationMonth ],\n  [   Year,  1,      durationYear  ]\n];\n\nexport default function(opt) {\n  const ext = opt.extent,\n        max = opt.maxbins || 40,\n        target = Math.abs(span(ext)) / max;\n\n  let i = bisector(i => i[2]).right(intervals, target),\n      units, step;\n\n  if (i === intervals.length) {\n    units = Year,\n    step = tickStep(ext[0] / durationYear, ext[1] / durationYear, max);\n  } else if (i) {\n    i = intervals[target / intervals[i - 1][2] < intervals[i][2] / target ? i - 1 : i];\n    units = i[0];\n    step = i[1];\n  } else {\n    units = Milli;\n    step = Math.max(tickStep(ext[0], ext[1], max), 1);\n  }\n\n  return {units, step};\n}\n"],"names":["YEAR","QUARTER","MONTH","WEEK","DATE","DAY","DAYOFYEAR","HOURS","MINUTES","SECONDS","MILLISECONDS","TIME_UNITS","UNITS","reduce","o","u","i","timeUnits","units","array","slice","m","length","error","forEach","unit","hasOwnProperty","sort","a","b","defaultSpecifiers","t0","Date","t1","newInterval","floori","offseti","count","field","interval","date","arguments","floor","ceil","round","d0","d1","offset","step","Math","range","start","stop","previous","push","filter","test","setTime","end","every","isFinite","d","millisecond","k","durationSecond","durationMinute","durationHour","durationDay","durationWeek","second","getMilliseconds","getUTCSeconds","minute","getSeconds","getMinutes","hour","getHours","day","setHours","setDate","getDate","getTimezoneOffset","weekday","getDay","sunday","month","setMonth","getMonth","getFullYear","year","setFullYear","utcMinute","setUTCSeconds","getUTCMinutes","utcHour","setUTCMinutes","getUTCHours","utcDay","setUTCHours","setUTCDate","getUTCDate","utcWeekday","getUTCDay","utcSunday","utcMonth","setUTCMonth","getUTCMonth","getUTCFullYear","utcYear","setUTCFullYear","localYear","y","localDayOfYear","timeDay","localWeekNum","timeWeek","localFirst","localDate","H","M","S","L","utcDayOfYear","UTC","utcWeekNum","utcWeek","utcFirst","utcDate","get","inv","newDate","s","peek","_","p","key","f","phase","getUnit","t","toSet","constant","zero","one","v","week","firstDay","localGet","localInv","q","w","utcGet","getUTCMilliseconds","utcInv","timeIntervals","timeYear","timeMonth","timeHour","timeMinute","timeSecond","timeMillisecond","utcIntervals","utcSecond","utcMillisecond","timeInterval","utcInterval","ival","undefined","sequence","delta","compare","left","x","lo","hi","mid","ascending","NaN","ascendingComparator","center","right","e10","sqrt","e5","e2","tickStep","step0","abs","max","step1","pow","log","LN10","durationMonth","durationYear","Milli","Seconds","Minutes","Hours","Day","Month","Year","intervals","opt","ext","extent","maxbins","target","span","bisector","specifiers","extend","n","fmt","join","trim"],"mappings":"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"}